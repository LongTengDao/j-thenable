{
	"version":
		3,
	"file":
		"j-thenable.min.js",
	"sourceRoot":
		"../../src/",
	"sources":
		["version?text","export.ts"],
	"sourcesContent":
		[
			"export default '1.0.1';",
			"import version from './version?text';\nexport { version };\n\nimport freeze from '.Object.freeze';\nimport TypeError from '.TypeError';\nimport undefined from '.undefined';\n\nvar PENDING :0 = 0;\nvar FULFILLED :1 = 1;\nvar REJECTED :2 = 2;\ntype Status = 0 | 1 | 2;\n\nvar Private = function Thenable () {} as unknown as { new () :Private };\n\nexport function isThenable (value :any) :value is Public {\n\treturn value instanceof Private;\n}\n\nfunction t (thenable :Private, value :any) :void {\n\tif ( ( isThenable as (value :any) => value is Private )(value) ) {\n\t\tvar _status :Status = value._status;\n\t\tif ( _status===PENDING ) {\n\t\t\tthenable._on = [];\n\t\t\tvalue._on!.push(thenable);\n\t\t}\n\t\telse {\n\t\t\tthenable._value = value._value;\n\t\t\tthenable._status = _status;\n\t\t}\n\t}\n\telse {\n\t\tthenable._value = value;\n\t\tthenable._status = FULFILLED;\n\t}\n}\n\ntype Stack = { nextStack :Stack, thenable :Private, value :any, status :Status } | null;\nvar stack :Stack = null;\nfunction r (thenable :Private, value :any, status :Status) :void {\n\tif ( stack ) {\n\t\tstack = { nextStack: stack, thenable: thenable, value: value, status: status };\n\t\treturn;\n\t}\n\tfor ( ; ; ) {\n\t\tstack: {\n\t\t\tif ( status===FULFILLED ) {\n\t\t\t\tif ( thenable._onrejected ) { thenable._onrejected = undefined; }\n\t\t\t\tvar _onfulfilled :Function | undefined = thenable._onfulfilled;\n\t\t\t\tif ( _onfulfilled ) {\n\t\t\t\t\tthenable._onfulfilled = undefined;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvalue = _onfulfilled(value);\n\t\t\t\t\t\tif ( ( isThenable as (value :any) => value is Private )(value) ) {\n\t\t\t\t\t\t\tvar _status :Status = value._status;\n\t\t\t\t\t\t\tif ( _status===PENDING ) {\n\t\t\t\t\t\t\t\tvalue._on!.push(thenable);\n\t\t\t\t\t\t\t\tbreak stack;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvalue = value._value;\n\t\t\t\t\t\t\t\tstatus = _status;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\tvalue = error;\n\t\t\t\t\t\tstatus = REJECTED;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( thenable._onfulfilled ) { thenable._onfulfilled = undefined; }\n\t\t\t\tvar _onrejected :Function | undefined = thenable._onrejected;\n\t\t\t\tif ( _onrejected ) {\n\t\t\t\t\tthenable._onrejected = undefined;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvalue = _onrejected(value);\n\t\t\t\t\t\tif ( ( isThenable as (value :any) => value is Private )(value) ) {\n\t\t\t\t\t\t\tvar _status :Status = value._status;\n\t\t\t\t\t\t\tif ( _status===PENDING ) {\n\t\t\t\t\t\t\t\tvalue._on!.push(thenable);\n\t\t\t\t\t\t\t\tbreak stack;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvalue = value._value;\n\t\t\t\t\t\t\t\tstatus = _status;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse { status = FULFILLED; }\n\t\t\t\t\t}\n\t\t\t\t\tcatch (error) { value = error; }\n\t\t\t\t}\n\t\t\t}\n\t\t\tthenable._value = value;\n\t\t\tthenable._status = status;\n\t\t\tvar _on :Private[] | null = thenable._on;\n\t\t\tif ( _on ) {\n\t\t\t\tthenable._on = null;\n\t\t\t\tfor ( var index :number = _on.length; index; ) {\n\t\t\t\t\tstack = { nextStack: stack, thenable: _on[--index], value: value, status: status };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ( !stack ) { break; }\n\t\tthenable = stack.thenable;\n\t\tvalue = stack.value;\n\t\tstatus = stack.status;\n\t\tstack = stack.nextStack;\n\t}\n}\n\nvar Public :{ new (executor :Executor) :Public } = function Thenable (this :Private, executor :Executor) :void {\n\tif ( typeof executor!=='function' ) { throw TypeError('Thenable executor is not a function'); }\n\tvar executed :boolean | undefined;\n\tvar red :boolean | undefined;\n\tvar _value :any;\n\tvar _status :Status | undefined;\n\tvar THIS :Private = this;\n\tTHIS._on = [];\n\ttry {\n\t\texecutor(\n\t\t\tfunction resolve (value :any) {\n\t\t\t\tif ( red ) { return; }\n\t\t\t\tred = true;\n\t\t\t\tif ( executed ) {\n\t\t\t\t\tif ( ( isThenable as (value :any) => value is Private )(value) ) {\n\t\t\t\t\t\t_status = value._status;\n\t\t\t\t\t\tif ( _status===PENDING ) { value._on!.push(THIS); }\n\t\t\t\t\t\telse { r(THIS, value._value, _status); }\n\t\t\t\t\t}\n\t\t\t\t\telse { r(THIS, value, FULFILLED); }\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t_value = value;\n\t\t\t\t\t_status = FULFILLED;\n\t\t\t\t}\n\t\t\t},\n\t\t\tfunction reject (error :any) {\n\t\t\t\tif ( red ) { return; }\n\t\t\t\tred = true;\n\t\t\t\tif ( executed ) { r(THIS, error, REJECTED); }\n\t\t\t\telse {\n\t\t\t\t\t_value = error;\n\t\t\t\t\t_status = REJECTED;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tif ( !red ) {\n\t\t\texecuted = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tcatch (error) {\n\t\tif ( !red ) {\n\t\t\tred = true;\n\t\t\tTHIS._value = error;\n\t\t\tTHIS._status = REJECTED;\n\t\t\tTHIS._on = null;\n\t\t\treturn;\n\t\t}\n\t}\n\tif ( _status===FULFILLED && ( isThenable as (value :any) => value is Private )(_value) ) {\n\t\t_status = _value._status;\n\t\tif ( _status===PENDING ) {\n\t\t\t_value._on!.push(THIS);\n\t\t\treturn;\n\t\t}\n\t\t_value = _value._value;\n\t}\n\tTHIS._value = _value;\n\tTHIS._status = _status!;\n\tTHIS._on = null;\n} as unknown as { new (executor :Executor) :Public };\n\nPrivate.prototype = Public.prototype = {\n\t_status: PENDING,\n\t_value: undefined,\n\t_on: null,\n\t_onfulfilled: undefined,\n\t_onrejected: undefined,\n\tthen: function then (this :Private, onfulfilled? :Function, onrejected? :Function) :Private {\n\t\tvar THIS :Private = this;\n\t\tvar thenable :Private = new Private;\n\t\tswitch ( THIS._status ) {\n\t\t\tcase PENDING:\n\t\t\t\tthenable._on = [];\n\t\t\t\tthenable._onfulfilled = onfulfilled;\n\t\t\t\tthenable._onrejected = onrejected;\n\t\t\t\tTHIS._on!.push(thenable);\n\t\t\t\treturn thenable;\n\t\t\tcase FULFILLED:\n\t\t\t\tif ( typeof onfulfilled==='function' ) {\n\t\t\t\t\ttry { t(thenable, onfulfilled(THIS._value)); }\n\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\tthenable._value = error;\n\t\t\t\t\t\tthenable._status = REJECTED;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthenable._value = THIS._value;\n\t\t\t\t\tthenable._status = FULFILLED;\n\t\t\t\t}\n\t\t\t\treturn thenable;\n\t\t\tcase REJECTED:\n\t\t\t\tif ( typeof onrejected==='function' ) {\n\t\t\t\t\ttry { t(thenable, onrejected(THIS._value)); }\n\t\t\t\t\tcatch (error) {\n\t\t\t\t\t\tthenable._value = error;\n\t\t\t\t\t\tthenable._status = REJECTED;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthenable._value = THIS._value;\n\t\t\t\t\tthenable._status = REJECTED;\n\t\t\t\t}\n\t\t\t\treturn thenable;\n\t\t}\n\t\tthrow TypeError('Method Thenable.prototype.then called on incompatible receiver');\n\t}\n};\n\nexport function resolve (value :any) :Public {\n\tvar THIS :Private = new Private;\n\tt(THIS, value);\n\treturn THIS;\n}\n\nexport function reject (error :any) :Public {\n\tvar THIS :Private = new Private;\n\tTHIS._status = REJECTED;\n\tTHIS._value = error;\n\treturn THIS;\n}\n\nexport function all (values :readonly any[]) :Public {\n\tvar THIS :Private = new Private;\n\tTHIS._on = [];\n\tvar _value :any[] = [];\n\tvar count :number = 0;\n\tfunction _onrejected (error :any) :void { THIS._status===PENDING && r(THIS, error, REJECTED); }\n\tfor ( var length :number = values.length, index :number = 0; index<length; ++index ) {\n\t\tvar value :any = values[index];\n\t\tif ( ( isThenable as (value :any) => value is Private )(value) ) {\n\t\t\tvar _status :Status = value._status;\n\t\t\tif ( _status===PENDING ) {\n\t\t\t\t++count;\n\t\t\t\t_value[index] = undefined;\n\t\t\t\tvalue._on!.push({\n\t\t\t\t\t_onfulfilled: function (index :number) :Function {\n\t\t\t\t\t\treturn function (value :any) :void {\n\t\t\t\t\t\t\tif ( THIS._status===PENDING ) {\n\t\t\t\t\t\t\t\t_value[index] = value;\n\t\t\t\t\t\t\t\tif ( count>1 ) { --count; }\n\t\t\t\t\t\t\t\telse { r(THIS, _value, FULFILLED); }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}(index),\n\t\t\t\t\t_onrejected: _onrejected\n\t\t\t\t} as Private);\n\t\t\t}\n\t\t\telse if ( _status===REJECTED ) {\n\t\t\t\tTHIS._value = value._value;\n\t\t\t\tTHIS._status = REJECTED;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse { _value[index] = value._value; }\n\t\t}\n\t\telse { _value[index] = value; }\n\t}\n\treturn THIS;\n}\n\nexport function race (values :readonly any[]) :Public {\n\tvar THIS :Private = new Private;\n\tTHIS._on = [];\n\tvar that :Private = {\n\t\t_onfulfilled: function (value :any) :void { THIS._status===PENDING && r(THIS, value, FULFILLED); },\n\t\t_onrejected: function (error :any) :void { THIS._status===PENDING && r(THIS, error, REJECTED); }\n\t} as Private;\n\tfor ( var length :number = values.length, index :number = 0; index<length; ++index ) {\n\t\tvar value :any = values[index];\n\t\tif ( ( isThenable as (value :any) => value is Private )(value) ) {\n\t\t\tvar _status :Status = value._status;\n\t\t\tif ( _status===PENDING ) { value._on!.push(that); }\n\t\t\telse {\n\t\t\t\tTHIS._value = value._value;\n\t\t\t\tTHIS._status = _status;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tTHIS._value = value;\n\t\t\tTHIS._status = FULFILLED;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn THIS;\n}\n\nimport Default from '.default?=';\nexport default Default(Public, {\n\tversion: version,\n\tThenable: Public,\n\tisThenable: isThenable,\n\tresolve: resolve,\n\treject: reject,\n\tall: all,\n\trace: race\n});\n\nexport var Thenable :Readonly<{ new (executor :Executor) :Public }> = freeze\n\t? /*#__PURE__*/ function () {\n\t\tfreeze(Public.prototype);\n\t\tfreeze(Public);\n\t\treturn Public;\n\t}()\n\t: Public;\n\ntype Function = (value :any) => void;\ntype Executor = (resolve :Function, reject :Function) => void;\ntype Private = {\n\t_status :Status,\n\t_value :any,\n\t_on :Private[] | null,\n\t_onfulfilled :Function | undefined,\n\t_onrejected :Function | undefined,\n\tthen (onfulfilled? :Function, onrejected? :Function) :Private,\n};\ntype Public = Readonly<object & {\n\tthen (this :Public, onfulfilled? :Function, onrejected? :Function) :Public,\n}>;"
		],
	"names":
		["PENDING","FULFILLED","REJECTED","Private","isThenable","value","t","thenable","_status","_on","push","_value","stack","r","status","nextStack","_onrejected","undefined","_onfulfilled","error","index","length","Public","executor","TypeError","executed","red","THIS","this","prototype","then","onfulfilled","onrejected","Default","version","Thenable","resolve","reject","all","values","count","race","that"],
	"mappings":
		";;;;;;;;;;+LAAA,w9CCOIA,EAAa,EACbC,EAAe,EACfC,EAAc,EAGdC,EAAU,aAEd,SAAgBC,EAAYC,GAC3B,OAAOA,aAAiBF,EAGzB,SAASG,EAAGC,EAAmBF,GAC9B,GAAOD,EAAiDC,GAAS,CAChE,IAAIG,EAAkBH,EAAMG,QACvBA,IAAUR,GACdO,EAASE,IAAM,GACfJ,EAAMI,IAAKC,KAAKH,KAGhBA,EAASI,OAASN,EAAMM,OACxBJ,EAASC,QAAUA,QAIpBD,EAASI,OAASN,EAClBE,EAASC,QAAUP,EAKrB,IAAIW,EAAe,KACnB,SAASC,EAAGN,EAAmBF,EAAYS,GAC1C,GAAKF,EACJA,EAAQ,CAAEG,UAAWH,EAAOL,SAAUA,EAAUF,MAAOA,EAAOS,OAAQA,QAGvE,OAAY,CACXF,EAAO,CACN,GAAKE,IAASb,EAAY,CACpBM,EAASS,cAAgBT,EAASS,YAAcC,GACrD,IAAIC,EAAqCX,EAASW,aAClD,GAAKA,EAAe,CACnBX,EAASW,aAAeD,EACxB,IAEC,GAAOb,EADPC,EAAQa,EAAab,IAC4C,CAEhE,IADIG,EAAkBH,EAAMG,WACbR,EAAU,CACxBK,EAAMI,IAAKC,KAAKH,GAChB,MAAMK,EAGNP,EAAQA,EAAMM,OACdG,EAASN,GAIZ,MAAOW,GACNd,EAAQc,EACRL,EAASZ,QAIP,CACCK,EAASW,eAAiBX,EAASW,aAAeD,GACvD,IAAID,EAAoCT,EAASS,YACjD,GAAKA,EAAc,CAClBT,EAASS,YAAcC,EACvB,IAEC,GAAOb,EADPC,EAAQW,EAAYX,IAC6C,CAChE,IAAIG,EACJ,IADIA,EAAkBH,EAAMG,WACbR,EAAU,CACxBK,EAAMI,IAAKC,KAAKH,GAChB,MAAMK,EAGNP,EAAQA,EAAMM,OACdG,EAASN,OAGJM,EAASb,EAEjB,MAAOkB,GAASd,EAAQc,IAG1BZ,EAASI,OAASN,EAClBE,EAASC,QAAUM,EACnB,IAAIL,EAAwBF,EAASE,IACrC,GAAKA,EAAM,CACVF,EAASE,IAAM,KACf,IAAM,IAAIW,EAAgBX,EAAIY,OAAQD,GACrCR,EAAQ,CAAEG,UAAWH,EAAOL,SAAUE,IAAMW,GAAQf,MAAOA,EAAOS,OAAQA,IAI7E,IAAMF,EAAU,MAChBL,EAAWK,EAAML,SACjBF,EAAQO,EAAMP,MACdS,EAASF,EAAME,OACfF,EAAQA,EAAMG,WAIhB,IAAIO,EAA+C,SAAkCC,GACpF,GAAuB,mBAAXA,EAA0B,MAAMC,UAAU,uCACtD,IAAIC,EACAC,EACAf,EACAH,EACAmB,EAAgBC,KACpBD,EAAKlB,IAAM,GACX,IA4BC,GA3BAc,EACC,SAAkBlB,GACZqB,IACLA,GAAM,EACDD,EACGrB,EAAiDC,IACvDG,EAAUH,EAAMG,WACDR,EAAYK,EAAMI,IAAKC,KAAKiB,GACpCd,EAAEc,EAAMtB,EAAMM,OAAQH,GAEvBK,EAAEc,EAAMtB,EAAOJ,IAGtBU,EAASN,EACTG,EAAUP,KAGZ,SAAiBkB,GACXO,IACLA,GAAM,EACDD,EAAaZ,EAAEc,EAAMR,EAAOjB,IAEhCS,EAASQ,EACTX,EAAUN,OAIPwB,EAEL,YADAD,GAAW,GAIb,MAAON,GACN,IAAMO,EAKL,OAJAA,GAAM,EACNC,EAAKhB,OAASQ,EACdQ,EAAKnB,QAAUN,OACfyB,EAAKlB,IAAM,MAIb,GAAKD,IAAUP,GAAeG,EAAiDO,GAAU,CAExF,IADAH,EAAUG,EAAOH,WACFR,EAEd,YADAW,EAAOF,IAAKC,KAAKiB,GAGlBhB,EAASA,EAAOA,OAEjBgB,EAAKhB,OAASA,EACdgB,EAAKnB,QAAUA,EACfmB,EAAKlB,IAAM,aAGZN,EAAQ0B,UAAYP,EAAOO,UAAY,CACtCrB,QAASR,EACTW,OAAQM,EACRR,IAAK,KACLS,aAAcD,EACdD,YAAaC,EACba,KAAM,SAA8BC,EAAwBC,GAC3D,IAAIL,EAAgBC,KAChBrB,EAAoB,IAAIJ,EAC5B,OAASwB,EAAKnB,SACb,KAAKR,EAKJ,OAJAO,EAASE,IAAM,GACfF,EAASW,aAAea,EACxBxB,EAASS,YAAcgB,EACvBL,EAAKlB,IAAKC,KAAKH,GACRA,EACR,KAAKN,EACJ,GAA0B,mBAAd8B,EACX,IAAMzB,EAAEC,EAAUwB,EAAYJ,EAAKhB,SACnC,MAAOQ,GACNZ,EAASI,OAASQ,EAClBZ,EAASC,QAAUN,OAIpBK,EAASI,OAASgB,EAAKhB,OACvBJ,EAASC,QAAUP,EAEpB,OAAOM,EACR,KAAKL,EACJ,GAAyB,mBAAb8B,EACX,IAAM1B,EAAEC,EAAUyB,EAAWL,EAAKhB,SAClC,MAAOQ,GACNZ,EAASI,OAASQ,EAClBZ,EAASC,QAAUN,OAIpBK,EAASI,OAASgB,EAAKhB,OACvBJ,EAASC,QAAUN,EAEpB,OAAOK,EAET,MAAMiB,UAAU,oEAmFHS,EAAQX,EAAQ,CAC9BY,QD7Sc,QC8SdC,SAAUb,EACVlB,WAAYA,EACZgC,QAnFD,SAAgBA,EAAS/B,GACxB,IAAIsB,EAAgB,IAAIxB,EAExB,OADAG,EAAEqB,EAAMtB,GACDsB,GAiFPU,OA9ED,SAAgBA,EAAQlB,GACvB,IAAIQ,EAAgB,IAAIxB,EAGxB,OAFAwB,EAAKnB,QAAUN,EACfyB,EAAKhB,OAASQ,EACPQ,GA2EPW,IAxED,SAAgBA,EAAKC,GACpB,IAAIZ,EAAgB,IAAIxB,EACxBwB,EAAKlB,IAAM,GACX,IAAIE,EAAgB,GAChB6B,EAAgB,EACpB,SAASxB,EAAaG,GAAoBQ,EAAKnB,UAAUR,GAAWa,EAAEc,EAAMR,EAAOjB,GACnF,IAAM,IAAImB,EAAiBkB,EAAOlB,OAAQD,EAAgB,EAAGA,EAAMC,IAAUD,EAAQ,CACpF,IAAIf,EAAakC,EAAOnB,GACxB,GAAOhB,EAAiDC,GAAS,CAChE,IAAIG,EAAkBH,EAAMG,QAC5B,GAAKA,IAAUR,IACZwC,EACF7B,EAAOS,GAASH,EAChBZ,EAAMI,IAAKC,KAAK,CACfQ,aAAc,SAAUE,GACvB,OAAO,SAAUf,GACXsB,EAAKnB,UAAUR,IACnBW,EAAOS,GAASf,EACL,EAANmC,IAAcA,EACZ3B,EAAEc,EAAMhB,EAAQV,KALZ,CAQZmB,GACFJ,YAAaA,QAGV,CAAA,GAAKR,IAAUN,EAAW,CAC9ByB,EAAKhB,OAASN,EAAMM,OACpBgB,EAAKnB,QAAUN,EACf,MAEMS,EAAOS,GAASf,EAAMM,aAEvBA,EAAOS,GAASf,EAExB,OAAOsB,GAsCPc,KAnCD,SAAgBA,EAAMF,GACrB,IAAIZ,EAAgB,IAAIxB,EACxBwB,EAAKlB,IAAM,GAKX,IAJA,IAAIiC,EAAgB,CACnBxB,aAAc,SAAUb,GAAoBsB,EAAKnB,UAAUR,GAAWa,EAAEc,EAAMtB,EAAOJ,IACrFe,YAAa,SAAUG,GAAoBQ,EAAKnB,UAAUR,GAAWa,EAAEc,EAAMR,EAAOjB,KAE3EmB,EAAiBkB,EAAOlB,OAAQD,EAAgB,EAAGA,EAAMC,IAAUD,EAAQ,CACpF,IAAIf,EAAakC,EAAOnB,GACxB,IAAOhB,EAAiDC,GASnD,CACJsB,EAAKhB,OAASN,EACdsB,EAAKnB,QAAUP,EACf,MAXA,IAAIO,EAAkBH,EAAMG,QAC5B,GAAKA,IAAUR,EACV,CACJ2B,EAAKhB,OAASN,EAAMM,OACpBgB,EAAKnB,QAAUA,EACf,MAJ0BH,EAAMI,IAAKC,KAAKgC,GAa7C,OAAOf"
}